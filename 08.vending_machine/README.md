# â˜• Vending Machine System for Basys3 FPGA

> 4-digit 7-segment display ê¸°ë°˜ **ì”ì•¡ í‘œì‹œ + LED ì• ë‹ˆë©”ì´ì…˜ + CIRCLE ì¶œë ¥ ì• ë‹ˆë©”ì´ì…˜**ì„ ì§€ì›í•˜ëŠ”  
> **Verilog HDL ê¸°ë°˜ ìíŒê¸° ì‹œìŠ¤í…œ**  
> â›³ Basys3 FPGA ë³´ë“œ í™œìš© | ë²„íŠ¼ ì…ë ¥ ê¸°ë°˜ FSM ì œì–´

---

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

ë³¸ í”„ë¡œì íŠ¸ëŠ” **Basys3 (100MHz)** FPGA ë³´ë“œì™€ 4ìë¦¬ 7-Segment Display, ë²„íŠ¼, LEDë¥¼ ì´ìš©í•˜ì—¬ ì•„ë˜ ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤:

1. **ê¸ˆì•¡ íˆ¬ì… (100ì›/500ì›)**
2. **ì”ì•¡ í‘œì‹œ ë° ë°˜í™˜ ê¸°ëŠ¥**
3. **êµ¬ë§¤ ì¡°ê±´ ì¶©ì¡± ì‹œ LED ì• ë‹ˆë©”ì´ì…˜ + FND CIRCLE ì¶œë ¥**
4. **7-Segmentë¥¼ í™œìš©í•œ ì‹¤ì‹œê°„ ì”ì•¡ í‘œì‹œ**

---

## ğŸ”§ ì‹œìŠ¤í…œ êµ¬ì„±

### âœ… ì…ë ¥ (ë²„íŠ¼)
| ë²„íŠ¼ | ê¸°ëŠ¥ |
|------|------|
| `btnU` | ì‹œìŠ¤í…œ ë¦¬ì…‹ |
| `btnL` | 100ì› íˆ¬ì… |
| `btnC` | 500ì› íˆ¬ì… |
| `btnR` | ì»¤í”¼ êµ¬ë§¤ (300ì› í•„ìš”) |
| `btnD` | ì”ì•¡ ë°˜í™˜ |

### âœ… ì¶œë ¥
| ì¶œë ¥ | ì„¤ëª… |
|------|------|
| `FND[3:0]`, `SEG[6:0]` | í˜„ì¬ ì”ì•¡ ë˜ëŠ” êµ¬ë§¤ ì‹œ CIRCLE ì• ë‹ˆë©”ì´ì…˜ í‘œì‹œ |
| `LED[6:0]` | ì»¤í”¼ êµ¬ë§¤ ì‹œ LED ì ë“± ì• ë‹ˆë©”ì´ì…˜ (0.5ì´ˆ ê°„ê²© ë°˜ë³µ) |

---

## ğŸ§  FSM ì„¤ê³„

**vending_fsm.v** ëª¨ë“ˆì„ í†µí•´ ê¸ˆì•¡ ìƒíƒœì™€ ë™ì‘ì„ ìƒíƒœê¸°ê³„(FSM)ë¡œ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.

| ìƒíƒœ | ì„¤ëª… |
|------|------|
| `IDLE` | ì´ˆê¸° ìƒíƒœ (ì”ì•¡ 0) |
| `+100`, `+500` | ê¸ˆì•¡ íˆ¬ì… í›„ ëˆ„ì  |
| `BUY` | 300ì› ì´ìƒ ì‹œ êµ¬ë§¤ ì²˜ë¦¬ í›„ ì°¨ê° |
| `REFUND` | ì”ì•¡ ë°˜í™˜ í›„ ì´ˆê¸°í™” |

> ë²„íŠ¼ì€ ëª¨ë‘ ë””ë°”ìš´ì‹± ë° ì›ìƒ· ì²˜ë¦¬í•˜ì—¬ ì•ˆì •ì ì¸ ë™ì‘ ë³´ì¥

---

## ğŸ–¥ ëª¨ë“ˆ ìš”ì•½

### â–¶ `vending_fsm.v`
- ì”ì•¡ ëˆ„ì  ë° ì¡°ê±´ì— ë”°ë¥¸ êµ¬ë§¤/ë°˜í™˜ FSM
- balance ì‹ í˜¸ ì¶œë ¥ (BCD ë³€í™˜ ì „ 14bit)

### â–¶ `fnd_controller.v`
- 4ìë¦¬ FNDì˜ ìë¦¬ ì„ íƒ ë° ìˆ«ì ë˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ í‘œì‹œ
- êµ¬ë§¤ ì‹œ CIRCLE ì• ë‹ˆë©”ì´ì…˜ 1íšŒ ì‹¤í–‰ í›„ ìˆ«ì ëª¨ë“œ ë³µê·€

### â–¶ `led_coffee_effect.v`
- ì»¤í”¼ êµ¬ë§¤ í›„ 7ê°œ LEDë¥¼ 0.5ì´ˆ ê°„ê²©ìœ¼ë¡œ ìˆœì°¨ ì ë“±í•˜ëŠ” ì• ë‹ˆë©”ì´ì…˜
- ì• ë‹ˆë©”ì´ì…˜ 5ì´ˆ í›„ ì¢…ë£Œ

### â–¶ `button_debouncer.v`, `button_onepulse.v`
- ë²„íŠ¼ ì…ë ¥ ì•ˆì •í™” ë° 1í´ëŸ­ í„ìŠ¤ ìƒì„±

---

## ğŸ”„ ì• ë‹ˆë©”ì´ì…˜ ìƒì„¸ (CIRCLE)

`FND`ì˜ ê° ìë¦¬ë³„ íŠ¹ì • segmentë§Œì„ ìˆœì„œëŒ€ë¡œ ì ë“±í•˜ì—¬ **ì‹œê³„ë°©í–¥ íšŒì „ ì• ë‹ˆë©”ì´ì…˜** êµ¬í˜„:

| Step | ìœ„ì¹˜ |
|------|------|
| 0 | AN3.A |
| 1 | AN2.A |
| 2 | AN1.A |
| 3 | AN0.A |
| 4 | AN0.B |
| 5 | AN0.C |
| 6 | AN0.D |
| 7 | AN1.D |
| 8 | AN2.D |
| 9 | AN3.D |
| 10 | AN3.E |
| 11 | AN3.F |
| ... | ë°˜ë³µ |

> ê° stepì€ ì•½ 0.5ì´ˆ ê°„ê²©ìœ¼ë¡œ ì§„í–‰ë˜ì–´ 6ì´ˆ ë™ì•ˆ ì™„ì£¼í•¨

---

## ğŸ“ ì£¼ìš” íŒŒì¼ êµ¬ì„±

```
vending_machine/
â”œâ”€â”€ vending_machine_top.v     # ì „ì²´ ì‹œìŠ¤í…œ í†µí•© TOP
â”œâ”€â”€ vending_fsm.v             # ì”ì•¡ ìƒíƒœ ê´€ë¦¬ FSM
â”œâ”€â”€ fnd_controller.v          # 7-Segment ì¶œë ¥ ì œì–´
â”œâ”€â”€ led_coffee_effect.v       # LED ì ë“± ì• ë‹ˆë©”ì´ì…˜
â”œâ”€â”€ button_debouncer.v        # ë””ë°”ìš´ìŠ¤ ì²˜ë¦¬
â”œâ”€â”€ button_onepulse.v         # ì›ìƒ· ì²˜ë¦¬
â””â”€â”€ README.md                 # ì„¤ëª… ë¬¸ì„œ
```

---

## ğŸ§® í•˜ë“œì›¨ì–´ ê°œë… ìš”ì•½

| í•­ëª© | ì„¤ëª… |
|------|------|
| **ë””ë°”ìš´ì‹±** | ë²„íŠ¼ ì…ë ¥ì˜ íŠ í˜„ìƒ ì œê±° |
| **ì›ìƒ· íšŒë¡œ** | 1í´ëŸ­ë§Œ high ìœ ì§€ë˜ëŠ” í„ìŠ¤ ìƒì„± |
| **FSM** | ê° ìƒíƒœ ë° ì „ì´ ì¡°ê±´ì— ë”°ë¥¸ ë™ì‘ ì œì–´ |
| **BCD ë³€í™˜** | 14bit balanceë¥¼ 4ìë¦¬ 10ì§„ìˆ˜ë¡œ ë³€í™˜ |
| **Segment ì œì–´** | ê° ìë¦¬ìˆ˜ë³„ AN + SEG ì¡°í•©ìœ¼ë¡œ ì¶œë ¥ |

---

## ğŸ’» ê°œë°œ í™˜ê²½

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ê°œë°œ ë³´ë“œ** | Digilent Basys3 (Xilinx Artix-7 XC7A35T) |
| **ê°œë°œ íˆ´** | Xilinx Vivado 2021.1 |
| **HDL** | Verilog |
| **ì‹œë®¬ë ˆì´ì…˜ íˆ´** | Vivado Simulator |
| **í´ëŸ­ ì£¼íŒŒìˆ˜** | 100MHz |
| **ì…ì¶œë ¥ ì¥ì¹˜** | ìŠ¤ìœ„ì¹˜ ë²„íŠ¼ (btnU~btnD), 7-Segment FND, LED |

---

## ğŸ“¸ ê²°ê³¼ ì˜ìƒ

> ğŸ“½ [ì‹œì—° ì˜ìƒ ë³´ëŸ¬ê°€ê¸°](https://youtu.be/ssTYbH39unI)

---
